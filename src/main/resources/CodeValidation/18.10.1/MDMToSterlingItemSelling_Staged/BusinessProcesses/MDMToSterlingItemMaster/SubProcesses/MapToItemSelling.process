<?xml version="1.0" encoding="UTF-8"?>
<pd:ProcessDefinition xmlns:pfx="http://mdm.wsgc.com/2014/CanonicalData" xmlns:ns="http://www.tibco.com/pe/DeployedVarsType" xmlns:ns12="http://www.ultimosoft.com/CLEH/ExceptionHandler.xsd" xmlns:ns13="http://www.tibco.com/namespaces/tnt/plugins/jms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns1="http://www.tibco.com/pe/EngineTypes" xmlns:ns2="http://www.tibco.com/namespaces/tnt/plugins/file" xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions" xmlns:wsi="java://com.wsi.bpphase1.utility.WSIJavaFunction" xmlns:ns3="http://schemas.tibco.com/bw/plugins/xml/5.0/xmlExceptions" xmlns:ns4="http://schemas.tibco.com/bw/plugins/jms/5.0/jmsExceptions" xmlns:pfx2="http://www.wsgc.com/Schemas/MDM/ItemSelling/Feed2" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pfx3="http://www.yantra.com/documentation/YCM/manageItem/input" xmlns:pfx4="http://www.wsgc.com/schemas/common/AppAuditSwitches.xsd" xmlns:pfx5="http://www.yantra.com/documentation/YCM/manageItemSelling/input" xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:BW="java://com.tibco.pe.core.JavaCustomXPATHFunctions">
    <xsd:import namespace="http://www.wsgc.com/Schemas/MDM/ItemSelling/Feed2" schemaLocation="/SharedResources/XMLSchemas/PKMS/XSD_PKMS_Feed2.xsd"/>
    <xsd:import namespace="http://www.yantra.com/documentation/YCM/manageItem/input" schemaLocation="/Sterling_XSD/XSD_ItemSellingEvent_OMSD2.xsd"/>
    <xsd:import namespace="http://www.yantra.com/documentation/YCM/manageItemSelling/input" schemaLocation="/SharedResources/XMLSchemas/Sterling/XSD_ItemSellingEvent.xsd"/>
    <xsd:import namespace="http://mdm.wsgc.com/2014/CanonicalData" schemaLocation="/SharedResources/XMLSchemas/2014/CanonicalData/ItemSellingEvent.xsd"/>
    <pd:name>BusinessProcesses/MDMToSterlingItemMaster/SubProcesses/MapToItemSelling.process</pd:name>
    <pd:startName>Start</pd:startName>
    <pd:startType>
        <xsd:element name="SellingXML" type="xsd:string"/>
    </pd:startType>
    <pd:startX>69</pd:startX>
    <pd:startY>94</pd:startY>
    <pd:returnBindings>
        <Feed2>
            <XML>
                <xsl:value-of select="tib:render-xml($SellingMap/pfx2:Feed2)"/>
            </XML>
        </Feed2>
    </pd:returnBindings>
    <pd:endName>End</pd:endName>
    <pd:endX>912</pd:endX>
    <pd:endY>98</pd:endY>
    <pd:errorSchemas/>
    <pd:processVariables>
        <RestrictionId>
            <xsd:element name="ShippingServiceLevel">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="RUSHRestrictionId" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="STANDARDRestrictionId" type="xsd:string" minOccurs="0"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </RestrictionId>
        <ExtnSellInd>
            <xsd:element name="root">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="ExtnSellInd" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </ExtnSellInd>
        <UseUnplannedInventory>
            <xsd:element name="root">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="UseUnplannedInventory" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </UseUnplannedInventory>
    </pd:processVariables>
    <pd:targetNamespace>http://xmlns.example.com/1419613205852</pd:targetNamespace>
    <pd:activity name="Audit input Message to CLE">
        <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
        <pd:resourceType>ae.process.subprocess</pd:resourceType>
        <pd:x>284</pd:x>
        <pd:y>298</pd:y>
        <config>
            <processName>/CommonProcesses/CLEClientStub/SendLogRequest.process</processName>
            <spawn>true</spawn>
        </config>
        <pd:inputBindings>
            <ns12:LogRequest>
                <ns12:envCode>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ENV"/>
                </ns12:envCode>
                <ns12:appCode>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/CLE/AppCode"/>
                </ns12:appCode>
                <ns12:interfaceCode>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/InterfaceCode"/>
                </ns12:interfaceCode>
                <ns12:timestamp>
                    <xsl:value-of select="current-dateTime()"/>
                </ns12:timestamp>
                <ns12:status>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/CLE/Constants/AuditBegin"/>
                </ns12:status>
                <ns12:message>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/AuditBeginMsg_ItemSelling"/>
                </ns12:message>
                <ns12:TransactionDetails>
                    <ns12:transactionDomain>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/transactionDomain"/>
                    </ns12:transactionDomain>
                    <ns12:transactionType>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/transactionType_ItemSelling"/>
                    </ns12:transactionType>
                    <ns12:transactionID>
                        <xsl:value-of select="$GetTransactionID/TransactionID"/>
                    </ns12:transactionID>
                </ns12:TransactionDetails>
                <ns12:AuditInfo>
                    <ns12:payload>
                        <xsl:value-of select="$Start/SellingXML"/>
                    </ns12:payload>
                    <ns12:auditStep>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/CLE/Constants/AuditBegin"/>
                    </ns12:auditStep>
                </ns12:AuditInfo>
            </ns12:LogRequest>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Audit Output Message to CLE">
        <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
        <pd:resourceType>ae.process.subprocess</pd:resourceType>
        <pd:x>744</pd:x>
        <pd:y>301</pd:y>
        <config>
            <processName>/CommonProcesses/CLEClientStub/SendLogRequest.process</processName>
            <spawn>true</spawn>
        </config>
        <pd:inputBindings>
            <ns12:LogRequest>
                <ns12:envCode>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ENV"/>
                </ns12:envCode>
                <ns12:appCode>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/CLE/AppCode"/>
                </ns12:appCode>
                <ns12:interfaceCode>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/InterfaceCode"/>
                </ns12:interfaceCode>
                <ns12:timestamp>
                    <xsl:value-of select="current-dateTime()"/>
                </ns12:timestamp>
                <ns12:status>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/CLE/Constants/AuditEnd"/>
                </ns12:status>
                <ns12:message>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/AuditEndMsg_ItemSelling"/>
                </ns12:message>
                <ns12:TransactionDetails>
                    <ns12:transactionDomain>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/transactionDomain"/>
                    </ns12:transactionDomain>
                    <ns12:transactionType>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/transactionType_ItemSelling"/>
                    </ns12:transactionType>
                    <ns12:transactionID>
                        <xsl:value-of select="$GetTransactionID/TransactionID"/>
                    </ns12:transactionID>
                </ns12:TransactionDetails>
                <ns12:AuditInfo>
                    <ns12:payload>
                        <xsl:value-of select="wsi:removeNamespace(tib:render-xml($SellingMap/pfx5:ItemList))"/>
                    </ns12:payload>
                    <ns12:auditStep>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/CLE/Constants/AuditEnd"/>
                    </ns12:auditStep>
                </ns12:AuditInfo>
            </ns12:LogRequest>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="CatchAll">
        <pd:type>com.tibco.pe.core.CatchActivity</pd:type>
        <pd:resourceType>ae.activities.catch</pd:resourceType>
        <pd:x>915</pd:x>
        <pd:y>306</pd:y>
        <pd:handler>true</pd:handler>
        <config>
            <catchAll>true</catchAll>
        </config>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="ExtnSellInd">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>396</pd:x>
        <pd:y>304</pd:y>
        <config>
            <variableName>ExtnSellInd</variableName>
        </config>
        <pd:inputBindings>
            <root>
                <xsl:for-each select="$Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/IsSellable/Value">
                    <xsl:sort select="@startTime"/>
                    <ExtnSellInd>
                        <xsl:value-of select=".[1]"/>
                    </ExtnSellInd>
                </xsl:for-each>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="GetAppAudit">
        <pd:type>com.tibco.pe.core.GetSharedVariableActivity</pd:type>
        <pd:resourceType>ae.activities.getSharedVariable</pd:resourceType>
        <pd:x>170</pd:x>
        <pd:y>94</pd:y>
        <config>
            <variableConfig>/SharedResources/SharedVariables/SV-OMSD2_AppAuditSwitch.sharedvariable</variableConfig>
        </config>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="GetTransactionID">
        <pd:type>com.tibco.pe.core.GetSharedVariableActivity</pd:type>
        <pd:resourceType>ae.activities.getSharedVariable</pd:resourceType>
        <pd:x>281</pd:x>
        <pd:y>94</pd:y>
        <config>
            <variableConfig>/SharedResources/SharedVariables/JSV-TransactionID.jobsharedvariable</variableConfig>
        </config>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="Parse_ItemSelling_XML">
        <pd:type>com.tibco.plugin.xml.XMLParseActivity</pd:type>
        <pd:resourceType>ae.activities.XMLParseActivity</pd:resourceType>
        <pd:x>397</pd:x>
        <pd:y>97</pd:y>
        <config>
            <inputStyle>text</inputStyle>
            <xsdVersion>default</xsdVersion>
            <validateOutput>true</validateOutput>
            <term ref="pfx:ItemSellingEvent"/>
        </config>
        <pd:inputBindings>
            <xmlString>
                <xsl:value-of select="$Start/SellingXML"/>
            </xmlString>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="RestrictionId">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>606</pd:x>
        <pd:y>303</pd:y>
        <config>
            <variableName>RestrictionId</variableName>
        </config>
        <pd:inputBindings>
            <ShippingServiceLevel>
                <xsl:if test="$Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/ShippingServiceLevel/@code=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/RUSH">
                    <RUSHRestrictionId>
                        <xsl:value-of select="tib:concat-sequence-format($Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/ShippingServiceLevel[@code=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/RUSH]/RestrictionId,',')"/>
                    </RUSHRestrictionId>
                </xsl:if>
                <xsl:if test="$Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/ShippingServiceLevel/@code=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/STANDARD">
                    <STANDARDRestrictionId>
                        <xsl:value-of select="tib:concat-sequence-format($Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/ShippingServiceLevel[@code=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/STANDARD]/RestrictionId,',')"/>
                    </STANDARDRestrictionId>
                </xsl:if>
            </ShippingServiceLevel>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="SellingMap">
        <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
        <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
        <pd:x>607</pd:x>
        <pd:y>177</pd:y>
        <config>
            <element ref="pfx5:ItemList"/>
        </config>
        <pd:inputBindings>
            <pfx5:ItemList>
                <xsl:attribute name="EventType">
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/SELLING"/>
                </xsl:attribute>
                <pfx5:Item>
                    <xsl:attribute name="ItemID">
                        <xsl:value-of select="$Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/@itemId"/>
                    </xsl:attribute>
                    <xsl:attribute name="OrganizationCode">
                        <xsl:value-of select="$Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/@conceptCode"/>
                    </xsl:attribute>
                    <xsl:attribute name="UnitOfMeasure">
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/UnitOfMeasure"/>
                    </xsl:attribute>
                    <xsl:attribute name="Action">
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/Action"/>
                    </xsl:attribute>
                    <pfx5:Extn>
                        <xsl:attribute name="ExtnRegShipRestID">
                            <xsl:value-of select="if(count($Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/ShippingServiceLevel[@code=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/STANDARD])=0)&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/RegularRuleID&#xA;else if((count($Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/ShippingServiceLevel[@code=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/STANDARD])>0) and (exists($Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/ShippingServiceLevel[@code=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/STANDARD]/RestrictionId)))&#xA;then $RestrictionId/ShippingServiceLevel/STANDARDRestrictionId&#xA;else &quot;&quot;"/>
                        </xsl:attribute>
                        <xsl:attribute name="ExtnRushShipRestID">
                            <xsl:value-of select="if(count($Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/ShippingServiceLevel[@code=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/RUSH])=0)&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/RushRuleID&#xA;else if((count($Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/ShippingServiceLevel[@code=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/RUSH])>0) and (exists($Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/ShippingServiceLevel[@code=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/RUSH]/RestrictionId)))&#xA;then $RestrictionId/ShippingServiceLevel/RUSHRestrictionId&#xA;else &quot;&quot;"/>
                        </xsl:attribute>
                        <xsl:if test="if($ExtnSellInd/root/ExtnSellInd[1]=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/True) &#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/Yes&#xA;else $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/No">
                            <xsl:attribute name="ExtnSellInd">
                                <xsl:value-of select="if($ExtnSellInd/root/ExtnSellInd[1]=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/True) &#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/Yes&#xA;else $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/No"/>
                            </xsl:attribute>
                        </xsl:if>
                        <xsl:if test="count($Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/PickupServiceLevel[@code=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/PICKUP_INTERNAL])>0">
                            <xsl:attribute name="ExtnIsShipToStore">
                                <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/Yes"/>
                            </xsl:attribute>
                        </xsl:if>
                        <pfx5:WSIAddnlItemDataList>
                            <xsl:attribute name="Reset">
                                <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/Yes"/>
                            </xsl:attribute>
                            <xsl:for-each select="$Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/IsSellable/Value">
                                <xsl:variable name="Sellposition" select="position()"/>
                                <xsl:if test="$Sellposition > 1">
                                    <pfx5:WSIAddnlItemData>
                                        <xsl:attribute name="Type">
                                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/IsSellable"/>
                                        </xsl:attribute>
                                        <xsl:attribute name="Value">
                                            <xsl:value-of select="if(.=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/True) &#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/Yes &#xA;else $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/No"/>
                                        </xsl:attribute>
                                        <xsl:attribute name="EffectiveStartTime">
                                            <xsl:value-of select="@startTime"/>
                                        </xsl:attribute>
                                        <xsl:attribute name="EnterpriseCode">
                                            <xsl:value-of select="$Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/@conceptCode"/>
                                        </xsl:attribute>
                                    </pfx5:WSIAddnlItemData>
                                </xsl:if>
                            </xsl:for-each>
                            <xsl:for-each select="$Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/IsNla/Value">
                                <xsl:variable name="Nlaposition" select="position()"/>
                                <xsl:if test="$Nlaposition >1">
                                    <pfx5:WSIAddnlItemData>
                                        <xsl:attribute name="Type">
                                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/IsNla"/>
                                        </xsl:attribute>
                                        <xsl:attribute name="Value">
                                            <xsl:value-of select="if(.=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/True) then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/Yes else $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/No"/>
                                        </xsl:attribute>
                                        <xsl:attribute name="EffectiveStartTime">
                                            <xsl:value-of select="@startTime"/>
                                        </xsl:attribute>
                                        <xsl:attribute name="EnterpriseCode">
                                            <xsl:value-of select="$Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/@conceptCode"/>
                                        </xsl:attribute>
                                    </pfx5:WSIAddnlItemData>
                                </xsl:if>
                            </xsl:for-each>
                        </pfx5:WSIAddnlItemDataList>
                    </pfx5:Extn>
                    <pfx5:InventoryParameters>
                        <xsl:attribute name="UseUnplannedInventory">
                            <xsl:value-of select="if($UseUnplannedInventory/root/UseUnplannedInventory[1]=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/False) &#xA;then &#xA;$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/Yes&#xA; else&#xA;$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/No"/>
                        </xsl:attribute>
                    </pfx5:InventoryParameters>
                    <pfx5:PrimaryInformation>
                        <xsl:if test="count($Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/PickupServiceLevel[@code=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/PICKUP_REGULAR])>0">
                            <xsl:attribute name="IsPickupAllowed">
                                <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/Yes"/>
                            </xsl:attribute>
                        </xsl:if>
                    </pfx5:PrimaryInformation>
                </pfx5:Item>
            </pfx5:ItemList>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Send_ItemSelling_Message_to_Sterling">
        <pd:type>com.tibco.plugin.jms.JMSQueueSendActivity</pd:type>
        <pd:resourceType>ae.activities.JMSQueueSendActivity</pd:resourceType>
        <pd:x>741</pd:x>
        <pd:y>177</pd:y>
        <config>
            <PermittedMessageType>Text</PermittedMessageType>
            <SessionAttributes>
                <transacted>false</transacted>
                <acknowledgeMode>1</acknowledgeMode>
                <maxSessions>1</maxSessions>
                <destination/>
            </SessionAttributes>
            <ConfigurableHeaders>
                <JMSDeliveryMode>%%MDMToSterlingItemMaster/JMS/EMSConstants/DeliveryMode%%</JMSDeliveryMode>
                <JMSExpiration>%%MDMToSterlingItemMaster/JMS/EMSConstants/JMSExpirationSecs%%</JMSExpiration>
                <JMSPriority>%%MDMToSterlingItemMaster/JMS/EMSConstants/Priority%%</JMSPriority>
            </ConfigurableHeaders>
            <ConnectionReference>/SharedConnections/JMS/EMSSterling.sharedjmscon</ConnectionReference>
        </config>
        <pd:inputBindings>
            <ns13:ActivityInput>
                <destinationQueue>
                    <xsl:value-of select="concat($_globalVariables/ns:GlobalVariables/PrefixQueue,&quot;.&quot;,$_globalVariables/ns:GlobalVariables/ENV,&quot;.&quot;,$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/JMS/SterlingSend,'.0',$GetTransactionID/TransactionID mod $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/MOD)"/>
                </destinationQueue>
                <Body>
                    <xsl:value-of select="wsi:removeNamespace(tib:render-xml($SellingMap/pfx5:ItemList))"/>
                </Body>
            </ns13:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="SendExceptionRequest">
        <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
        <pd:resourceType>ae.process.subprocess</pd:resourceType>
        <pd:x>913</pd:x>
        <pd:y>177</pd:y>
        <config>
            <processName>/CommonProcesses/CLEClientStub/SendExceptionRequest.process</processName>
            <spawn>true</spawn>
        </config>
        <pd:inputBindings>
            <ns12:ExceptionHandlerRequest>
                <ns12:envCode>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ENV"/>
                </ns12:envCode>
                <ns12:appCode>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/CLE/AppCode"/>
                </ns12:appCode>
                <ns12:interfaceCode>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/InterfaceCode"/>
                </ns12:interfaceCode>
                <ns12:hostName>
                    <xsl:value-of select="BW:getHostName()"/>
                </ns12:hostName>
                <ns12:notificationList>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/NotificationList"/>
                </ns12:notificationList>
                <ns12:timeStamp>
                    <xsl:value-of select="current-dateTime()"/>
                </ns12:timeStamp>
                <ns12:activityName>
                    <xsl:value-of select="tib:substring-after-last($_error/ns1:ErrorReport/ProcessStack, &quot;/&quot;)"/>
                </ns12:activityName>
                <ns12:message>
                    <xsl:value-of select="if($_error_Parse_ItemSelling_XML/ActivityErrors/ns3:XMLParseException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/ParseException/XMLParseException/ExceptionMsg&#xA;else if($_error_Parse_ItemSelling_XML/ActivityErrors/ns3:UnsupportedEncodingException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/ParseException/UnsupportedEncodingException/ExceptionMsg&#xA;else if($_error_Parse_ItemSelling_XML/ActivityErrors/ns3:MissingByteCountException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/ParseException/MissingByteCountException/ExceptionMsg&#xA;else if($_error_Parse_ItemSelling_XML/ActivityErrors/ns3:ValidationException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/ParseException/ValidationException/ExceptionMsg&#xA;else if($_error_Send_ItemSelling_Message_to_Sterling/ActivityErrors/ns4:JMSInvalidInputException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/JMSException/JMSInvalidInputException/ExceptionMsg&#xA;else if($_error_Send_ItemSelling_Message_to_Sterling/ActivityErrors/ns4:JMSMessageCreateException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/JMSException/JMSMessageCreateException/ExceptionMsg&#xA;else if($_error_Send_ItemSelling_Message_to_Sterling/ActivityErrors/ns4:JMSSessionCreateException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/JMSException/JMSSessionCreateException/ExceptionMsg&#xA;else if($_error_Send_ItemSelling_Message_to_Sterling/ActivityErrors/ns4:JMSSendException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/JMSException/JMSSendException/ExceptionMsg&#xA;else&#xA;$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/GeneralException/ExceptionMsg"/>
                </ns12:message>
                <ns12:payload>
                    <xsl:value-of select="$Start/SellingXML"/>
                </ns12:payload>
                <ns12:ErrorLevel>
                    <ns12:errorCode>
                        <xsl:value-of select="if($_error_Parse_ItemSelling_XML/ActivityErrors/ns3:XMLParseException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/ParseException/XMLParseException/ExceptionCode&#xA;else if($_error_Parse_ItemSelling_XML/ActivityErrors/ns3:UnsupportedEncodingException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/ParseException/UnsupportedEncodingException/ExceptionCode&#xA;else if($_error_Parse_ItemSelling_XML/ActivityErrors/ns3:MissingByteCountException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/ParseException/MissingByteCountException/ExceptionCode&#xA;else if($_error_Parse_ItemSelling_XML/ActivityErrors/ns3:ValidationException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/ParseException/ValidationException/ExceptionCode&#xA;else if($_error_Send_ItemSelling_Message_to_Sterling/ActivityErrors/ns4:JMSInvalidInputException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/JMSException/JMSInvalidInputException/ExceptionCode&#xA;else if($_error_Send_ItemSelling_Message_to_Sterling/ActivityErrors/ns4:JMSMessageCreateException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/JMSException/JMSMessageCreateException/ExceptionCode&#xA;else if($_error_Send_ItemSelling_Message_to_Sterling/ActivityErrors/ns4:JMSSessionCreateException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/JMSException/JMSSessionCreateException/ExceptionCode&#xA;else if($_error_Send_ItemSelling_Message_to_Sterling/ActivityErrors/ns4:JMSSendException )&#xA;then $_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/JMSException/JMSSendException/ExceptionCode&#xA;else&#xA;$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Exceptions/GeneralException/ExceptionCode"/>
                    </ns12:errorCode>
                </ns12:ErrorLevel>
                <ns12:TransactionDetails>
                    <ns12:transactionDomain>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/transactionDomain"/>
                    </ns12:transactionDomain>
                    <ns12:transactionType>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/transactionType_ItemSelling"/>
                    </ns12:transactionType>
                    <ns12:transactionID>
                        <xsl:value-of select="$GetTransactionID/TransactionID"/>
                    </ns12:transactionID>
                </ns12:TransactionDetails>
                <xsl:for-each xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="$_processContext/ns1:ProcessContext">
                    <ns12:ProcessContextDetails>
                        <ns12:processId>
                            <xsl:value-of select="ProcessId"/>
                        </ns12:processId>
                        <ns12:projectName>
                            <xsl:value-of select="ProjectName"/>
                        </ns12:projectName>
                        <ns12:engineName>
                            <xsl:value-of select="EngineName"/>
                        </ns12:engineName>
                        <ns12:restartedFromCheckpoint>
                            <xsl:value-of select="RestartedFromCheckpoint"/>
                        </ns12:restartedFromCheckpoint>
                        <xsl:for-each select="TrackingInfo">
                            <ns12:trackingInfo>
                                <xsl:value-of select="."/>
                            </ns12:trackingInfo>
                        </xsl:for-each>
                    </ns12:ProcessContextDetails>
                </xsl:for-each>
                <xsl:for-each xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="$_error/ns1:ErrorReport">
                    <ns12:ErrorReportType>
                        <ns12:stackTrace>
                            <xsl:value-of select="StackTrace"/>
                        </ns12:stackTrace>
                        <ns12:msg>
                            <xsl:value-of select="Msg"/>
                        </ns12:msg>
                        <ns12:fullClass>
                            <xsl:value-of select="FullClass"/>
                        </ns12:fullClass>
                        <ns12:class>
                            <xsl:value-of select="Class"/>
                        </ns12:class>
                        <ns12:processStack>
                            <xsl:value-of select="ProcessStack"/>
                        </ns12:processStack>
                        <xsl:if test="MsgCode">
                            <ns12:msgCode>
                                <xsl:value-of select="MsgCode"/>
                            </ns12:msgCode>
                        </xsl:if>
                        <xsl:if test="Data/*">
                            <ns12:data>
                                <xsl:value-of select="Data/*"/>
                            </ns12:data>
                        </xsl:if>
                    </ns12:ErrorReportType>
                </xsl:for-each>
            </ns12:ExceptionHandlerRequest>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="UseUnplannedInventory">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>494</pd:x>
        <pd:y>177</pd:y>
        <config>
            <variableName>UseUnplannedInventory</variableName>
        </config>
        <pd:inputBindings>
            <root>
                <xsl:for-each select="$Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/IsNla/Value">
                    <xsl:sort select="@startTime"/>
                    <UseUnplannedInventory>
                        <xsl:value-of select=".[1]"/>
                    </UseUnplannedInventory>
                </xsl:for-each>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="IsDeleteMessageLogRequest">
        <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
        <pd:resourceType>ae.process.subprocess</pd:resourceType>
        <pd:x>585</pd:x>
        <pd:y>98</pd:y>
        <config>
            <processName>/CommonProcesses/CLEClientStub/SendLogRequest.process</processName>
            <spawn>true</spawn>
        </config>
        <pd:inputBindings>
            <ns12:LogRequest>
                <ns12:envCode>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ENV"/>
                </ns12:envCode>
                <ns12:appCode>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/CLEAppCode"/>
                </ns12:appCode>
                <ns12:interfaceCode>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/InterfaceCode"/>
                </ns12:interfaceCode>
                <ns12:timestamp>
                    <xsl:value-of select="current-dateTime()"/>
                </ns12:timestamp>
                <ns12:status>
                    <xsl:value-of select="$_globalVariables/ns:GlobalVariables/CLE/Constants/AuditEnd"/>
                </ns12:status>
                <ns12:message>
                    <xsl:value-of select="concat($_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/transactionType_ItemSelling,' ',$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/AuditEndMsg_IsDelete)"/>
                </ns12:message>
                <ns12:TransactionDetails>
                    <ns12:transactionDomain>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/transactionDomain"/>
                    </ns12:transactionDomain>
                    <ns12:transactionType>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/transactionType_ItemSelling"/>
                    </ns12:transactionType>
                    <ns12:transactionID>
                        <xsl:value-of select="$GetTransactionID/TransactionID"/>
                    </ns12:transactionID>
                </ns12:TransactionDetails>
                <ns12:AuditInfo>
                    <ns12:payload>
                        <xsl:value-of select="$Start/SellingXML"/>
                    </ns12:payload>
                    <ns12:auditStep>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/CLE/Constants/AuditEnd"/>
                    </ns12:auditStep>
                </ns12:AuditInfo>
            </ns12:LogRequest>
        </pd:inputBindings>
    </pd:activity>
    <pd:transition>
        <pd:from>SellingMap</pd:from>
        <pd:to>Send_ItemSelling_Message_to_Sterling</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Parse_ItemSelling_XML</pd:from>
        <pd:to>ExtnSellInd</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Parse_ItemSelling_XML</pd:from>
        <pd:to>IsDeleteMessageLogRequest</pd:to>
        <pd:xpathDescription>Exists_IsDelete</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Parse_ItemSelling_XML/pfx:ItemSellingEvent/ItemSelling/@isDelete=$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/True</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Send_ItemSelling_Message_to_Sterling</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>CatchAll</pd:from>
        <pd:to>SendExceptionRequest</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>SendExceptionRequest</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Audit Output Message to CLE</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Start</pd:from>
        <pd:to>GetAppAudit</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>GetAppAudit</pd:from>
        <pd:to>GetTransactionID</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>GetTransactionID</pd:from>
        <pd:to>Parse_ItemSelling_XML</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Audit input Message to CLE</pd:from>
        <pd:to>Parse_ItemSelling_XML</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>GetTransactionID</pd:from>
        <pd:to>Audit input Message to CLE</pd:to>
        <pd:xpathDescription>AppAuditSwitch</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$GetAppAudit/pfx4:AppAuditSwitches/pfx4:AppAuditSwitch[*[local-name()=
$_globalVariables/ns:GlobalVariables/Constants/COL_INTERFACECODE]=
$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/InterfaceCode][*[local-name()=
$_globalVariables/ns:GlobalVariables/Constants/COL_AUDITMESSAGETYPE]=
$_globalVariables/ns:GlobalVariables/Constants/VALUE_MDMSTRIM_SellingReq ]/pfx4:AuditMessageFlag = 
$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/AppAuditSwitch</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Send_ItemSelling_Message_to_Sterling</pd:from>
        <pd:to>Audit Output Message to CLE</pd:to>
        <pd:xpathDescription>AppAuditSwitch</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$GetAppAudit/pfx4:AppAuditSwitches/pfx4:AppAuditSwitch[*[local-name()=
$_globalVariables/ns:GlobalVariables/Constants/COL_INTERFACECODE]=
$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/CLE/InterfaceCode][*[local-name()=
$_globalVariables/ns:GlobalVariables/Constants/COL_AUDITMESSAGETYPE]=
$_globalVariables/ns:GlobalVariables/Constants/VALUE_MDMSTRIM_SellingResp ]/pfx4:AuditMessageFlag = 
$_globalVariables/ns:GlobalVariables/MDMToSterlingItemMaster/Constants/AppAuditSwitch</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>ExtnSellInd</pd:from>
        <pd:to>UseUnplannedInventory</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>RestrictionId</pd:from>
        <pd:to>SellingMap</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>UseUnplannedInventory</pd:from>
        <pd:to>RestrictionId</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>IsDeleteMessageLogRequest</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:label>
        <pd:name>Label</pd:name>
        <pd:description>SubProcess for ItemSelling XML Message for Mapping</pd:description>
        <pd:x>213</pd:x>
        <pd:y>34</pd:y>
        <pd:width>313</pd:width>
        <pd:height>39</pd:height>
        <pd:fontColor>-16777216</pd:fontColor>
        <pd:color>-3342337</pd:color>
        <pd:type>solid</pd:type>
        <pd:thickness>0</pd:thickness>
        <pd:fade>true</pd:fade>
    </pd:label>
</pd:ProcessDefinition>